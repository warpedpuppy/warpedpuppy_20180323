/*! warpedpuppy 2015-12-02 */
!function(a){function b(){createjs.Sound.alternateExtensions=["mp3"],createjs.Sound.addEventListener("fileload",c),createjs.Sound.registerSound("/sounds/bouncePig/appleCrunch.mp3","crunch"),createjs.Sound.registerSound("/sounds/bouncePig/boing.mp3","boing"),createjs.Sound.registerSound("/sounds/bouncePig/drumroll.mp3","drumroll"),createjs.Sound.registerSound("/sounds/bouncePig/explosion.mp3","explosion"),createjs.Sound.registerSound("/sounds/bouncePig/click.mp3","click"),createjs.Sound.registerSound("/sounds/bouncePig/pop.mp3","pop"),I.totalSoundsAndLoader=7,I.animate=!0,I.canvasWidth=$(a).width(),I.canvasHeight=$(a).height(),I.halfHeight=I.canvasHeight/2,I.halfWidth=I.canvasWidth/2,I.speedLimit=I.storeSpeedLimit=10,I.vy=2,I.vx=0,I.bounce=-.7,I.stage=new PIXI.Stage(1731071,!0),I.renderer=PIXI.autoDetectRenderer(I.canvasWidth,I.canvasHeight),document.getElementById("warpedPuppyCanvas").appendChild(I.renderer.view);var b=new PIXI.AssetLoader(["/images/bouncePig/bpb.json","/fonts/games/bouncePig/levelText.xml","/fonts/games/bouncePig/text.xml"]);b.onComplete=c,b.load(),I.webGL=I.renderer instanceof PIXI.CanvasRenderer?!1:!0,a.onresize=e,I.counter=0}function c(){I.counter++,I.counter==I.totalSoundsAndLoader&&d()}function d(){I.levelComplete=new G;var b=$(a).height();b-I.canvasHeight,(new Date).getTime();I.keyString="",I.stars=new f("star.png",20,[3,8],[2,25],void 0,!0,!0,I,!1,1),I.mouseDown=!1,I.background=new l;var c=new i;c.x=I.halfWidth,c.y=I.halfHeight,I.hero=c,I.stage.addChild(c);var d=.5*I.hero.width,e=.5*I.hero.height,j=I.hero.x-d/2,n=I.hero.y-e/2;I.rect2=new PIXI.Rectangle(j,n,d,e),I.rect3=new PIXI.Rectangle(I.hero.x-I.hero.width/4,I.hero.y+I.hero.height/2-20,I.hero.width/2,5),I.kingCont=new PIXI.SpriteBatch,I.stage.addChild(I.kingCont),I.bouncePlatform=new h,I.swipeText=new PIXI.Sprite.fromFrame("swipeScreen.png"),I.swipeText.x=(I.canvasWidth-I.swipeText.width)/2,I.swipeText.y=I.canvasHeight-I.swipeText.height,I.level=new D,I.fruit=new m,I.score=new k,I.nextLevelScreen=new E,I.nextLevelScreen.addToStage(),I.animate=!0,I.introScreenOnStage=!0,I.score.decreaseBoolean=!1,requestAnimFrame(g)}function e(){I.canvasWidth=$(a).width(),I.canvasHeight=$(a).height(),I.halfWidth=I.canvasWidth/2,I.halfHeight=I.canvasHeight/2,I.renderer.resize(I.canvasWidth,I.canvasHeight);$(a).height();I.mines.redBackground.clear(),I.mines.redBackground.beginFill(16711680).drawRect(0,0,I.canvasWidth,I.canvasHeight).endFill(),I.hero.x=Math.ceil(I.halfWidth),I.hero.y=Math.ceil(I.halfHeight),I.bouncePlatform.dot1.x=I.bouncePlatform.dot2.x=I.bouncePlatform.dot1.y=I.bouncePlatform.dot2.y=0;var b=.5*I.hero.width,c=.5*I.hero.height,d=I.hero.x-b/2,e=I.hero.y-c/2;I.rect2=new PIXI.Rectangle(d,e,b,c),I.rect3=new PIXI.Rectangle(I.hero.x-I.hero.width/4,I.hero.y+I.hero.height/2-20,I.hero.width/2,5),I.background.background.width=I.canvasWidth,I.background.background.height=I.canvasHeight,void 0!==I.score&&I.score.place(),I.swipeText.x=(I.canvasWidth-I.swipeText.width)/2,I.swipeText.y=I.canvasHeight-I.swipeText.height,I.nextLevelScreen.resize()}function f(a,b,c,d,e,f,g,h,i,j){this.lifeSpan=d,this.loop=i,this.gv=h,this.objQ=b,this.bitmapString=a,this.op=[],this.go=!1,this.pixi=f,this.spriteSheet=g,this.speeds=c,this.startScale=void 0!==j?j:0,void 0!==e&&(this.rotateRange=e),this.scaleIncrease=.5,this.buildPool()}function g(){var a,b;if(I.animate===!0&&I.introScreenOnStage===!1&&I.score.decreaseBoolean===!1){var c=(I.background.lines,I.clouds.clouds),d=I.drums.drums,e=I.fruit.fruits,f=I.bouncePlatform.dot1,h=I.bouncePlatform.dot2,i=I.bouncePlatform.line,j=I.mines.mines,k=new PIXI.Point(I.hero.x,I.hero.y),l=-.7,m=!1;I.background.tickIt(),I.bouncePlatform.tickIt(),I.stars.tickIt(),I.drums.miniExplosion.tickIt(),I.mines.redBigs.tickIt(),I.mines.redLittles.tickIt(),I.mouseDown!==!0&&(f.y-=I.vy,h.y-=I.vy,i.y-=I.vy,f.x-=I.vx,h.x-=I.vx,i.x-=I.vx,(f.y<0&&h.y<0||f.y>I.canvasHeight&&h.y>I.canvasHeight)&&(I.swipeText.visible=!0));for(var n=0;n<I.loopingQ;n++){if(j[n]&&I.mines.onStage===!0){var p=j[n];p.rotation+=p.rot,p.y-=I.vy,p.x-=I.vx,p.y<-p.h&&(p.y=I.canvasHeight),p.y>I.canvasHeight&&(p.y=-p.h),p.x>I.canvasWidth+p.w&&(p.x=-p.w),p.x<-p.w&&(p.x=I.canvasWidth+p.w);var q=new PIXI.Rectangle(p.x+p.rect.x,p.y+p.rect.y,p.rect.width,p.rect.height);I.vy>0&&x(q,I.rect2)&&(I.fruit.reset(),I.fruit.addToStage(),I.vy*=l,I.mines.explode(p),I.speedLimit=I.storeSpeedLimit,I.hero.bounce(),I.score.decrease())}if(c[n]&&I.clouds.onStage===!0){var r=c[n];r.y-=I.vy,r.x-=I.vx,r.y<-r.h&&(r.y=I.canvasHeight),r.y>I.canvasHeight&&(r.y=-r.h),r.x>I.canvasWidth+r.w&&(r.x=-r.w),r.x<-r.w&&(r.x=I.canvasWidth+r.w);var s=r.toGlobal(new PIXI.Point(r.box.x,r.box.y)),u=new PIXI.Rectangle(s.x,s.y,r.w,20);m===!1&&I.vy>0&&x(u,I.rect3)&&(I.vy*=l,r.y+=I.rect3.height,I.speedLimit=I.storeSpeedLimit,I.hero.bounce())}if(d[n]&&d[n].visible===!0&&1===d[n].alpha&&I.drums.onStage===!0){var v=d[n];v.y-=I.vy,v.x-=I.vx,v.y<-v.h&&(v.y=I.canvasHeight),v.y>I.canvasHeight+v.h&&(v.y=-v.h),v.x>I.canvasWidth+v.w&&(v.x=-v.w),v.x<-v.w&&(v.x=I.canvasWidth+v.w),a=v.toGlobal(v.point1),b=v.toGlobal(v.point2),m===!1&&I.vy>0&&I.speedLimit==I.storeSpeedLimit&&z(a,b,k,20)&&(I.hero.bounce(),I.speedLimit=75,"right"==v.side?(I.vx=-10,I.hero.scale.x=1):(I.vx=10,I.hero.scale.x=-1),I.vy*=-10,I.swipeText.visible=!1,I.drums.drumRoll(v))}if(e[n]){var y=e[n];y.rotation=t(0,w(45),y.rotQ),y.y-=I.vy,y.x-=I.vx,y.y>I.canvasHeight+y.height&&(y.y=-y.height),y.y<-y.height&&(y.y=I.canvasHeight+y.width),y.x>I.canvasWidth+y.width&&(y.x=-y.width),y.x<-y.width&&(y.x=I.canvasWidth+y.width);var A=new PIXI.Rectangle(y.x-y.width/2,y.y,y.width,y.height);m===!1&&I.speedLimit==I.storeSpeedLimit&&x(A,I.rect2)&&(I.fruit.eat(y),I.hero.chew(),I.score.increase(),I.stars.startPool(I.hero.x,I.hero.y,I.kingCont))}}I.vy<I.speedLimit&&(I.vy+=.25),I.speedLimit!=I.storeSpeedLimit?(I.swipeText.visible=!1,I.vy>0&&(I.speedLimit>I.storeSpeedLimit?I.speedLimit-=.5:I.speedLimit=I.storeSpeedLimit)):I.speedLimit==I.storeSpeedLimit&&I.vy>0&&(I.vy>I.speedLimit&&(I.vy-=.5),I.vx>I.speedLimit?I.vx-=.5:I.vx<-I.speedLimit&&(I.vx+=.5),I.vx<=I.speedLimit&&I.vy<=I.speedLimit&&I.drums.show()),a=new PIXI.Point(f.x,f.y),b=new PIXI.Point(h.x,h.y),I.mouseDown!==!0&&z(a,b,k,20)&&(f.x>h.x&&f.y<h.y||f.y>h.y&&f.x<h.x?(I.vx=-2,I.hero.scale.x=1):(f.x>h.x&&f.y>h.y||f.y<h.y&&f.x<h.x)&&(I.vx=2,I.hero.scale.x=-1),o("boing"),I.vy*=-1.5,I.hero.bounce(),I.swipeText.visible=!1,I.speedLimit=I.storeSpeedLimit),I.renderer.render(I.stage)}else I.animate===!0&&I.introScreenOnStage===!0&&I.score.decreaseBoolean===!1?(1==I.bouncePlatform.line.alpha&&(I.stars.tickIt(),I.background.tickIt(),I.bouncePlatform.tickIt(),I.nextLevelScreen.tickIt(),I.hero.y+=I.hero.introVY,I.hero.introVY+=.15,I.hero.y>I.halfHeight-130&&(I.hero.y=I.halfHeight-140,o("boing"),I.hero.introVY*=-.85,I.hero.bounce())),I.renderer.render(I.stage)):I.animate===!0&&I.introScreenOnStage===!1&&I.score.decreaseBoolean===!0&&(I.stars.tickIt(),I.score.classRef.tickIt(),I.mines.redBigs.tickIt(),I.mines.redLittles.tickIt(),I.renderer.render(I.stage));requestAnimFrame(g)}function h(){this.line=new PIXI.Sprite.fromFrame("line.gif"),this.line.height=2,this.line.anchor.y=.5,this.line.tint=0,this.line.visible=!1,I.stage.addChild(this.line),this.dot1=new PIXI.Sprite.fromFrame("newDot.png"),this.dot1.anchor.x=this.dot1.anchor.y=.5,this.dot1.visible=!1,I.stage.addChild(this.dot1),this.dot2=new PIXI.Sprite.fromFrame("newDot.png"),this.dot2.anchor.x=this.dot2.anchor.y=.5,this.dot2.visible=!1,I.stage.addChild(this.dot2)}function i(){var a=new PIXI.DisplayObjectContainer,b=[PIXI.Texture.fromFrame("heroFalling0001.png"),PIXI.Texture.fromFrame("heroFalling0002.png")],c=[PIXI.Texture.fromFrame("heroChewing0001.png"),PIXI.Texture.fromFrame("heroChewing0002.png")],d=[PIXI.Texture.fromFrame("heroFlying0001.png"),PIXI.Texture.fromFrame("heroFlying0002.png")],e=[PIXI.Texture.fromFrame("heroStanding0001.png"),PIXI.Texture.fromFrame("heroStanding0002.png")],f=[PIXI.Texture.fromFrame("heroGliding.png"),PIXI.Texture.fromFrame("heroGliding0001.png"),PIXI.Texture.fromFrame("heroGliding0002.png")];a.introVY=2;var g=new PIXI.MovieClip(b);g.anchor.x=g.anchor.y=.5,g.animationSpeed=.05,g.play(),a.addChild(g);var h=g,i=new PIXI.MovieClip(f);i.anchor.x=i.anchor.y=.5,i.animationSpeed=.05;var k=new PIXI.MovieClip(c);k.onComplete=j,k.anchor.x=k.anchor.y=.5,k.animationSpeed=.05;var l=new PIXI.MovieClip(d);l.anchor.x=l.anchor.y=.5,l.animationSpeed=.5;var m=new PIXI.MovieClip(e);return m.anchor.x=m.anchor.y=.5,m.animationSpeed=.0175,a.bounce=function(){h!=i&&(h.stop(),a.removeChild(h),a.addChild(i),i.play(),h=i)},a.chewCounter=0,a.chew=function(){h.stop(),a.removeChild(h),a.addChild(k),k.play(),h=k},a.fly=function(){h.stop(),a.removeChild(h),a.addChild(l),l.play(),h=l},a.stand=function(){h.stop(),a.removeChild(h),a.addChild(m),m.play(),h=m},a.hero=function(){a.chewCounter++,a.chewCounter>5?(a.chewCounter=0,h.stop(),a.removeChild(h),a.addChild(g),g.play(),h=g):a.chew()},a}function j(){I.hero.hero()}function k(){var a=this.cont=new PIXI.DisplayObjectContainer;a.score=0,a.decreaseBoolean=!1,this.slowTheDecreaseCounter=0;var b=this.scoreText=p("score:"),c=this.width1=b.width;a.addChild(b);var d=r(a.score).toString(),e=this.scoreAmount=p(d);e.x=c,a.addChild(e),a.fruit=0;var f=this.fruitText=p("fruit:");f.y=b.y+b.height+10;var g=this.width2=f.width;a.addChild(f);var h="0/"+I.fruit.fruitQ.toString(),i=this.fruitAmount=p(h);return i.y=f.y,i.x=g,a.addChild(i),a.reset=function(){a.fruit=0,a.removeChild(e),d=r(a.score).toString(),e.setText(d),e.x=c,a.addChild(e),a.removeChild(i),d=a.fruit.toString()+"/"+I.fruit.fruitQ.toString(),i.setText(d),i.x=g,a.addChild(i),a.place()},a.increase=function(){a.score+=1,a.fruit++,a.removeChild(e),d=r(a.score).toString(),e.setText(d),e.x=c,a.addChild(e),a.removeChild(i),d=a.fruit.toString()+"/"+I.fruit.fruitQ.toString(),i.setText(d),i.x=g,a.addChild(i),a.place(),a.fruit.toString()==I.level.fruitQ.toString()&&(I.level.increase(),I.levelComplete.addToStage())},a.decrease=function(){a.decreaseBoolean=!0},a.place=function(){a.x=I.level.x=I.canvasWidth-a.width-10},a.place(),a.classRef=this,a}function l(){this.cont=new PIXI.DisplayObjectContainer,this.container=new PIXI.SpriteBatch,this.ballQ=20,this.lines=[],this.balls=[],this.bricks=[],this.makeBalls(),this.horizontalLines(),this.cont.addChild(this.container),this.backgroundBitmap(),I.stage.addChildAt(this.cont,0)}function m(){this.fruitArray=["banana1.png","banana2.png","banana3.png","banana4.png","apple1.png","apple2.png","apple3.png","apple4.png","grapes1.png","grapes2.png","grapes3.png","grapes4.png","strawberry1.png","strawberry2.png","strawberry3.png","strawberry4.png"],this.fruitCont=new PIXI.SpriteBatch,I.stage.addChild(this.fruitCont),this.fruits=[],this.fruitQ=I.level.fruitQ,this.nextLevelFruitQ=this.fruitQ,this.storeFruit=[],this.build()}function n(a,b,c,d,e){for(var f=void 0===e?a.length:e,g=2*Math.PI/f,h=0,i=0;f>i;i++){var j=a[i];j.rotation=0,j.x=b*Math.cos(h),j.y=b*Math.sin(h),h+=g,c.addChild(j),d===!0&&(b+=3)}}function o(a){createjs.Sound.play(a)}function p(a,b){return void 0===b?new PIXI.BitmapText(a,{font:"30px SpeedballNo2SW",align:"left"}):new PIXI.BitmapText(a,{font:"64px bigText",align:"left"})}function q(a){a.parent.removeChild(a)}function r(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function s(a){a.visible=!1}function t(a,b,c){var d=new Date;return a+Math.cos(d.getTime()*c)*b}function u(a,b){return b++,Math.floor(Math.random()*(b-a)+a)}function v(a,b){return Math.random()*(b-a)+a}function w(a){return a*(Math.PI/180)}function x(a,b){return a.x<=b.x+b.width&&b.x<=a.x+a.width&&a.y<=b.y+b.height&&b.y<=a.y+a.height}function y(a,b){return function(){return a.apply(b,arguments)}}function z(a,b,c,d){this.intersects=!1;var e=(b.x-a.x)*(b.x-a.x)+(b.y-a.y)*(b.y-a.y),f=2*((b.x-a.x)*(a.x-c.x)+(b.y-a.y)*(a.y-c.y)),g=c.x*c.x+c.y*c.y+a.x*a.x+a.y*a.y-2*(c.x*a.x+c.y*a.y)-d*d,h=f*f-4*e*g;if(0>=h)this.inside=!1;else{var i=Math.sqrt(h),j=(-f+i)/(2*e),k=(-f-i)/(2*e);(0>j||j>1)&&(0>k||k>1)||(this.intersects=!0)}return this.intersects}function A(a,b){var c=0,d=0;c=b.x-a.x,d=b.y-a.y;var e=Math.atan2(d,c);d*=d,c*=c;var f=Math.sqrt(c+d);return[f,e]}function B(){this.clouds=[];for(var a=0;a<I.level.cloudQ;a++)this.clouds.push(this.cloud("right")),this.clouds.push(this.cloud("left"));this.onStage=!1}function C(){this.rightDrum=this.drum("right"),this.leftDrum=this.drum("left"),this.rightDrum.y=I.halfHeight,this.rightDrum.x=.75*I.canvasWidth,this.leftDrum.y=I.halfHeight,this.leftDrum.x=.25*I.canvasWidth,this.drums=[this.leftDrum,this.rightDrum],this.miniExplosion=new f("miniCloud.png",2e3,[10,30],[2,25],void 0,!0,!0,I),this.onStage=!1}function D(){var a=new PIXI.DisplayObjectContainer;a.y=10,a.level=1,a.fruitQ=5,a.mineQ=0,a.cloudQ=3,a.maxFruit=100,a.maxMines=10;var b=p("level:"),c=b.width;a.addChild(b);var d=p(a.level.toString());return d.x=c,a.addChild(d),a.increase=function(){a.level++,a.fruitQ<a.maxFruit&&(a.fruitQ+=5),a.mineQ<a.maxMines&&(a.mineQ+=2),I.score.fruit=0,I.score.reset(),a.removeChild(d),d.setText(a.level.toString()),d.x=c,a.addChild(d),a.place()},a.place=function(){a.x=I.canvasWidth-a.width-10},a.place(),a}function E(){I.storeScore=new H,I.mines=new F,I.clouds=new B,I.drums=new C,I.score.y=I.level.height+10,this.ON_STAGE=!1,this.startButton=new PIXI.Sprite.fromFrame("startButton.png"),this.startButton.anchor.x=this.startButton.anchor.y=.5,this.startButton.x=I.halfWidth,this.startButton.y=I.halfHeight-30,this.nextLevelButton=new PIXI.Sprite.fromFrame("nexLevelButton.png"),this.nextLevelButton.anchor.x=this.startButton.anchor.y=.5,this.nextLevelButton.x=I.halfWidth,this.nextLevelButton.y=I.halfHeight-50,this.dot1=I.bouncePlatform.dot1,this.dot2=I.bouncePlatform.dot2,this.line=I.bouncePlatform.line,this.fruitCont=new PIXI.SpriteBatch}function F(){this.mineQ=I.level.mineQ,this.mines=[],this.build(),this.redBackground=new PIXI.Graphics,this.redBackground.beginFill(16711680).drawRect(0,0,I.canvasWidth,I.canvasHeight).endFill(),this.redBackground.alpha=0,I.stage.addChildAt(this.redBackground,5),this.onStage=!1}function G(){this.level=new PIXI.Sprite.fromFrame("level.png"),this.level.anchor.x=this.level.anchor.y=.5,this.level.x=I.halfWidth,this.level.y=this.level.height,this.complete=new PIXI.Sprite.fromFrame("complete.png"),this.complete.anchor.x=this.complete.anchor.y=.5,this.complete.x=I.halfWidth,this.complete.y=this.level.y+this.level.height+20,this.tl=new TimelineLite,this.tl2=new TimelineLite,this.onStage=!1}function H(){this.oneGamePerPageHit=!0,this.startTime=(new Date).getTime()}var I=a.gv={},J="guest";b(),$(function(){}),f.prototype.singleObject=function(){var a;if(this.pixi)this.spriteSheet===!0&&(a=new PIXI.Sprite.fromFrame(this.bitmapString),a.anchor.x=a.anchor.y=.5,a.radius=a.width/2);else{a=new createjs.Bitmap(I.assetLoader.loader.getResult(this.bitmapString));var b=a.getBounds();a.regX=b.width/2,a.regY=b.height/2}return a.vx=0,a.vy=0,a.speed=0,a.angle=0,a.rotateRange=void 0!==this.rotateRange?v(this.rotateRange[0],this.rotateRange[1]):void 0,Math.floor(2*Math.random())<1&&(a.rotateRange*=-1),a.storeSpeed=0,a.storeScale=0,a},f.prototype.buildPool=function(){var a;this.op.length=0,this.op=[];for(var b=0;b<this.objQ;b++)a=this.singleObject(),a.angle=Math.round(360*Math.random()),a.speed=a.storeSpeed=v(this.speeds[0],this.speeds[1]),a.vx=Math.cos(a.angle)*a.speed,a.vy=Math.sin(a.angle)*a.speed,a.scale.x=a.scale.y=this.startScale,a.storeScale=1,this.op.push(a)},f.prototype.startPool=function(a,b,c,d){var e;this.addTo=c;for(var f=0;f<this.objQ;f++)e=this.op[f],this.restore(e),e.vx=Math.cos(e.angle),e.vy=Math.sin(e.angle),e.startX=e.x=a,e.startY=e.y=b,e.age=0,e.lifeSpan=u(this.lifeSpan[0],this.lifeSpan[1]),void 0===d?c.addChild(e):c.addChildAt(e,d);this.go=!0},f.prototype.addSpeed=function(a){a.speed+=.025,a.vx=Math.cos(a.angle)*a.speed,a.vy=Math.sin(a.angle)*a.speed},f.prototype.restore=function(a){a.y=a.startY,a.x=a.startX,a.visible=!0,a.speed=a.storeSpeed,a.scale.x=a.scale.y=this.startScale,a.alpha=1},f.prototype.tickIt=function(){if(this.go===!0)for(var a,b=0;b<this.objQ;b++)a=this.op[b],void 0!==a.parent&&(a.x+=a.vx,a.y+=a.vy,void 0!==a.rotateRange&&(a.rotation+=a.rotateRange),a.scale.x<1&&(a.scale.x+=.01,a.scale.y+=.01,a.age++,a.alpha-=.005),this.addSpeed(a),a.age>=a.lifeSpan&&(this.restore(a),a.parent.removeChild(a),a.age=0))},h.prototype.on=function(a){a===!0?(I.stage.interactive=!0,I.stage.mousedown=I.stage.touchstart=y(this.placeFirstDot,this),I.stage.mousemove=I.stage.touchmove=y(this.onMouseMove,this),I.stage.mouseup=I.stage.touchend=y(this.releaseMouse,this)):(I.stage.mousedown=I.stage.touchstart=null,I.stage.mousemove=I.stage.touchmove=null,I.stage.mouseup=I.stage.touchend=null)},h.prototype.placeFirstDot=function(a){var b=a.getLocalPosition(I.stage),c=b.x,d=b.y;this.line.width=0,this.line.x=c,this.line.y=d,this.line.visible=!0,this.dot1.x=c,this.dot1.y=d,this.dot1.visible=!0,this.dot2.x=c,this.dot2.y=d,this.dot2.visible=!0,I.mouseDown=!0},h.prototype.onMouseMove=function(a){if(I.mouseDown===!0){var b=a.getLocalPosition(I.stage),c=b.x,d=b.y;this.dot2.x=c,this.dot2.y=d;var e=A(new PIXI.Point(this.dot1.x,this.dot1.y),new PIXI.Point(this.dot2.x,this.dot2.y));this.line.rotation=e[1],this.line.width=e[0]}},h.prototype.releaseMouse=function(a){I.mouseDown=!1},h.prototype.tickIt=function(){this.dot2.visible===!0&&(this.dot1.rotation+=.25,this.dot2.rotation+=.25)},k.prototype.tickIt=function(){if(this.cont.fruit>0){var a;if(a=this.cont.fruit>20?2:this.cont.fruit>10?5:this.cont.fruit>5?10:20,this.slowTheDecreaseCounter%a===0){o("pop"),this.cont.score--,this.cont.fruit--;var b="";this.cont.removeChild(this.scoreAmount),b=this.cont.score.toString(),this.scoreAmount.setText(b),this.scoreAmount.x=this.width1,this.cont.addChild(this.scoreAmount),this.cont.removeChild(this.fruitAmount),b=this.cont.fruit.toString()+"/"+I.fruit.fruitQ.toString(),this.fruitAmount.setText(b),this.fruitAmount.x=this.width2,this.cont.addChild(this.fruitAmount),this.cont.place()}this.slowTheDecreaseCounter++}else TweenLite.to(I.mines.redBackground,.5,{alpha:0,onComplete:s,onCompleteParams:[I.mines.redBackground]}),this.slowTheDecreaseCounter=0,this.cont.decreaseBoolean=!1},l.prototype.backgroundBitmap=function(){var a=new PIXI.Sprite.fromFrame("background.jpg");a.width=I.canvasWidth,a.height=I.canvasHeight,this.background=a,this.cont.addChildAt(a,0)},l.prototype.makeBricks=function(){this.bricks=[],this.brickQ=0;for(var a,b=10,c=20,d=I.canvasWidth/b,e=I.canvasHeight/c,f=0;c>f;f++)for(var g=0;b>g;g++)a=new PIXI.Graphics,a.lineStyle(2,0,.25).moveTo(0,0).lineTo(d,0).lineTo(d,e).lineTo(0,e).lineTo(0,0),a.x=g*d+d/2,a.y=f*e+e/2,a.pivot.x=d/2,a.pivot.y=e/2,this.cont.addChild(a),this.bricks.push(a),this.brickQ++},l.prototype.makeBalls=function(){for(var a,b=[3276635,6236136,11686655,1500392,8196607],c=0,d=0;d<this.ballQ;d++)a=new PIXI.Sprite.fromFrame("bubble.png"),a.scale.x=a.scale.y=v(5,15),a.y=v(0,I.canvasHeight),a.x=v(0,I.canvasWidth),a.vx=v(.05,.5),a.vy=v(.05,.5),a.anchor.x=a.anchor.y=.5,a.tint=b[c],c++,c==b.length-1&&(c=0),this.balls.push(a),this.cont.addChild(a)},l.prototype.horizontalLines=function(){var a=40;this.lineQ=I.canvasHeight/a;var b;this.lines.length=0;for(var c=0;c<I.lineQ;c++)b=new PIXI.Sprite.fromFrame("line.gif"),b.y=a*c,b.height=2,b.alpha=.25,b.width=I.canvasWidth,b.tint=0,this.lines.push(b),this.container.addChild(b)},l.prototype.tickIt=function(){for(var a,b=0;b<this.ballQ;b++)a=this.balls[b],a.x+=a.vx,a.y+=a.vy,(a.x>I.canvasWidth||a.x<0)&&(a.vx*=-1),(a.y>I.canvasHeight||a.y<0)&&(a.vy*=-1);for(b=0;b<this.brickQ;b++);},m.prototype.build=function(){for(var a,b=0;b<this.fruitQ;b++)a=new PIXI.Sprite.fromFrame(this.fruitArray[u(0,this.fruitArray.length-1)]),a.scale.x=a.scale.y=.5,a.anchor.x=.5,this.storeFruit.push(a)},m.prototype.addMoreFruit=function(){for(var a,b=I.level.fruitQ-this.fruitQ,c=0;b>c;c++)a=new PIXI.Sprite.fromFrame(this.fruitArray[u(0,this.fruitArray.length-1)]),a.scale.x=a.scale.y=.5,a.anchor.x=.5,this.storeFruit.push(a);this.fruitQ=I.level.fruitQ},m.prototype.reset=function(){this.fruitCont.removeChildren();var a;this.fruits.length=0;for(var b=0;b<this.fruitQ;b++)a=this.storeFruit[b],a.rotation=w(0),a.x=a.y=0,a.scale.x=a.scale.y=.5,a.anchor.x=.5,a.anchor.y=0,a.alpha=1,a.visible=!0,this.fruits.push(a);return this.fruits},m.prototype.eat=function(a){this.fruitCont.removeChild(a),this.fruits.splice(this.fruits.indexOf(a),1),o("crunch")},m.prototype.addToStage=function(){for(var a,b=0;b<this.fruitQ;b++)a=this.fruits[b],a.anchor.x=.5,a.anchor.y=0,a.alpha=1,a.visible=!0,a.scale.x=a.scale.y=.5,a.rotQ=v(.001,.005),a.y=v(0,I.canvasHeight),a.x=v(0,I.canvasWidth),this.fruitCont.addChild(a)},Array.prototype.sortOn=function(){var a=this.slice();if(!arguments.length)return a.sort();var b=Array.prototype.slice.call(arguments);return a.sort(function(a,c){for(var d=b.slice(),e=d.shift();a[e]==c[e]&&d.length;)e=d.shift();return a[e]==c[e]?0:a[e]>c[e]?1:-1})},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.substr(1)},Array.prototype.move=function(a,b){if(b>=this.length)for(var c=b-this.length;c--+1;)this.push(void 0);return this.splice(b,0,this.splice(a,1)[0]),this},B.prototype.addToStage=function(){this.onStage=!0;for(var a,b=0;b<this.clouds.length;b++)a=this.clouds[b],a.alpha=0,a.y=Math.ceil(Math.random()*I.canvasHeight),a.x="right"==a.side?u(I.halfWidth+a.w/2,I.canvasWidth-a.w):u(0,I.halfWidth-a.w-30),I.stage.addChild(a),TweenLite.to(a,.5,{alpha:1})},B.prototype.removeFromStage=function(){this.onStage=!1;for(var a,b=0;b<this.clouds.length;b++)a=this.clouds[b],I.stage.removeChild(a)},B.prototype.cloud=function(a){var b="right"==a?new PIXI.Sprite.fromFrame("cloudRight.png"):new PIXI.Sprite.fromFrame("cloudLeft.png");b.side=a,b.cacheAsBitmap=!0,b.w=b.width,b.h=b.height;var c=new PIXI.Rectangle(0,60,b.w,10);return b.box=c,b},C.prototype.addToStage=function(){this.onStage=!0,this.rightDrum.visible=!0,this.leftDrum.visible=!0,I.stage.addChild(this.rightDrum),I.stage.addChild(this.leftDrum)},C.prototype.removeFromStage=function(){this.onStage=!1,I.stage.removeChild(this.rightDrum),I.stage.removeChild(this.leftDrum)},C.prototype.hide=function(){this.rightDrum.visible=!1,this.leftDrum.visible=!1},C.prototype.show=function(){this.rightDrum.visible!==!0&&I.levelComplete.onStage===!1&&(this.rightDrum.y=I.halfHeight,this.rightDrum.x=.75*I.canvasWidth,this.leftDrum.y=I.halfHeight,this.leftDrum.x=.25*I.canvasWidth,TweenLite.from(this.rightDrum,.5,{alpha:0}),TweenLite.from(this.leftDrum,.5,{alpha:0}),this.rightDrum.visible=!0,this.leftDrum.visible=!0)},C.prototype.drumRoll=function(a){I.animate=!1,this.drum=a,"left"==a.side?(a.x=I.halfWidth,a.y=I.halfHeight):(a.x=I.halfWidth,a.y=I.halfHeight+85),TweenLite.delayedCall(.5,y(this.blastOff,this))},C.prototype.blastOff=function(){this.hide(),I.animate=!0,o("explosion");var a=this.drum==this.rightDrum?-w(1080):w(1080);TweenLite.to(I.hero,4,{rotation:a,onComplete:this.heroZero}),this.miniExplosion.startPool(I.hero.x,I.hero.y+10,I.kingCont)},C.prototype.heroZero=function(){I.hero.rotation=w(0)},C.prototype.drum=function(a){var b=new PIXI.DisplayObjectContainer;b.side=a;var c=new PIXI.Sprite.fromFrame("drum.png");c.side=a,c.rotation=w("right"==a?-30:30),c.cacheAsBitmap=!0,c.w=b.w=c.width,c.h=b.h=c.height,b.addChild(c);var d;return"right"==a?(d=new PIXI.Graphics,d.lineStyle(2,0,1).moveTo(10,10).lineTo(b.w-12,-b.h-12),b.line=d,b.point1=new PIXI.Point(10,10),b.point2=new PIXI.Point(c.w-12,-c.h-12)):(d=new PIXI.Graphics,d.lineStyle(2,0,1).moveTo(-5,10).lineTo(b.w-25,b.h+33),b.line=d,b.point1=new PIXI.Point(-5,10),b.point2=new PIXI.Point(c.w-25,c.h+33)),b.pivot.x=c.width/2,b.pivot.y=c.height/2,b},E.prototype.resize=function(){this.ON_STAGE===!0&&(I.hero.x=I.halfWidth,this.startButton.x=I.halfWidth,this.nextLevelButton.x=I.halfWidth,this.startButton.y=I.halfHeight,this.nextLevelButton.y=I.halfHeight-50,this.line.x=I.halfWidth-200,this.dot1.x=I.halfWidth-200,this.dot2.x=I.halfWidth+200,this.line.y=I.halfHeight-100,this.dot1.y=I.halfHeight-100,this.dot2.y=I.halfHeight-100,I.hero.y=this.line.y-30,this.titleText.x=Math.ceil((I.canvasWidth-this.titleText.textWidth)/2),this.goalText.x=Math.ceil(I.halfWidth),this.titleText.y=Math.ceil(I.hero.y-200),this.goalText.y=Math.ceil(I.hero.y-100),this.fruitCont.x=I.halfWidth,this.fruitCont.y=I.hero.y)},E.prototype.stop=function(){I.introScreenOnStage=!0,TweenLite.delayedCall(.5,y(this.addToStage,this))},E.prototype.addToStage=function(){var a=(new Date).getTime(),b=a-I.startGame;arr=[["username",J],["result","win"],["duration",b]],I.keyString="",I.storeScore.sendScore(),this.ON_STAGE=!0,I.hero.alpha=0,this.fruitCont.alpha=0,this.line.alpha=0,this.dot1.alpha=0,this.dot2.alpha=0,I.introScreenOnStage=!0,I.fruit.fruitQ!=I.level.fruitQ&&I.fruit.addMoreFruit(),I.mines.mineQ!=I.level.mineQ&&I.mines.addMoreMines(),this.line.visible=!0,this.line.rotation=w(0),this.line.width=400,this.line.x=I.halfWidth-200,this.line.y=I.halfHeight-100,this.dot1.visible=!0,this.dot1.x=I.halfWidth-200,this.dot1.y=I.halfHeight-100,this.dot2.visible=!0,this.dot2.x=I.halfWidth+200,this.dot2.y=I.halfHeight-100,I.hero.y=Math.ceil(this.line.y-30),this.fruitCont.x=I.halfWidth,this.fruitCont.y=I.hero.y,I.stage.addChild(this.fruitCont),TweenLite.delayedCall(.11,y(this.makeRadial,this)),I.stage.removeChild(I.level),I.stage.removeChild(I.score),I.bouncePlatform.on(!1),I.swipeText.visible=!1,I.level.level>1?(I.stage.addChild(this.nextLevelButton),this.nextLevelButton.scale.x=this.nextLevelButton.scale.y=1,this.nextLevelButton.interactive=!0,this.nextLevelButton.buttonMode=!0,this.nextLevelButton.mousedown=this.nextLevelButton.touchstart=y(this.mouseDownHandler,this),this.nextLevelButton.mouseup=this.startButton.mouseupoutside=this.nextLevelButton.touchend=this.startButton.touchendoutside=y(this.transition,this),I.stage.addChild(this.nextLevelButton)):(this.startButton.alpha=0,this.startButton.scale.x=this.startButton.scale.y=1,this.startButton.interactive=!0,this.startButton.buttonMode=!0,this.startButton.mousedown=this.startButton.touchstart=y(this.mouseDownHandler,this),this.startButton.mouseup=this.startButton.mouseupoutside=this.startButton.touchend=this.startButton.touchendoutside=y(this.transition,this),I.stage.addChild(this.startButton)),this.titleText=new PIXI.BitmapText("Level "+I.level.level,{font:"64px bigText",align:"left"}),this.titleText.x=Math.ceil((I.canvasWidth-this.titleText.textWidth)/2);var c="";c=I.level.mineQ>0?"goal: eat the "+I.level.fruitQ+" pieces of fruit while avoiding the "+I.level.mineQ+" mines!":"goal: eat the "+I.level.fruitQ+" pieces of fruit!",this.goalText=p(c),this.goalText.pivot.x=this.goalText.textWidth/2,this.goalText.alpha=0,this.goalText.pivot.y=this.goalText.textHeight/2,this.goalText.x=Math.ceil(I.halfWidth),this.titleText.y=Math.ceil(I.hero.y-200),this.goalText.y=Math.ceil(I.hero.y-100),I.stage.addChild(this.goalText),this.titleText.alpha=0,I.stage.addChild(this.titleText);var d=1,e=I.level.level>1?3:1;TweenLite.to(this.line,d,{alpha:1,delay:e}),TweenLite.to(this.dot1,d,{alpha:1,delay:e}),TweenLite.to(this.dot2,d,{alpha:1,delay:e}),TweenLite.to(this.goalText,d,{alpha:1,delay:e}),TweenLite.to(this.titleText,d,{alpha:1,delay:e}),TweenLite.to(I.hero,d,{alpha:1,delay:e}),I.level.level>1?TweenLite.to(this.nextLevelButton,d,{alpha:1,delay:e}):TweenLite.to(this.startButton,d,{alpha:1,delay:e}),TweenLite.to(this.fruitCont,d,{alpha:1,delay:e}),I.levelComplete.shrink()},E.prototype.makeRadial=function(){this.fruitCont.rotation=w(0),n(I.fruit.reset(),250,this.fruitCont,!1,this.fruitQ)},E.prototype.transition=function(){for(var a=0;a<I.fruit.fruitQ;a++){var b=I.fruit.fruits[a];TweenLite.to(b,.25,{alpha:0,delay:.015*a})}var c=new TimelineLite;c.to(I.activeButton.scale,.15,{x:1.2,y:1.2}),c.to(I.activeButton.scale,.25,{x:0,y:0}),c.to(this.dot1,.15,{alpha:0,onComplete:s,onCompleteParams:[this.dot1]}),c.to(this.dot2,.15,{alpha:0,onComplete:s,onCompleteParams:[this.dot2]}),c.to(this.line,.15,{alpha:0,onComplete:s,onCompleteParams:[this.line]}),c.to(this.titleText,.15,{alpha:0}),c.to(this.goalText.scale,.15,{x:1.2,y:1.2}),c.to(I.hero,.75,{y:Math.ceil(I.halfHeight),delay:.5,onComplete:y(this.nextLevel,this)}),c.to(this.goalText.scale,.25,{x:1,y:1}),c.to(this.goalText,.25,{alpha:0,onComplete:q,onCompleteParams:[this.goalText]},"-=0.25")},E.prototype.mouseDownHandler=function(a){o("click"),a.target.scale.x=a.target.scale.y=.85,I.activeButton=a.target},E.prototype.clearNextLevelScreen=function(){this.ON_STAGE=!1,I.vy=2,I.vx=0,this.fruitCont.removeChildren(),I.stage.removeChild(this.fruitCont),I.stage.removeChild(this.titleText),this.line.visible=!1,this.line.alpha=1,this.line.width=0,this.line.x=0,this.line.y=0,this.dot1.visible=!1,this.dot1.x=0,this.dot1.alpha=1,this.dot1.y=0,this.dot2.visible=!1,this.dot2.alpha=1,this.dot2.x=0,this.dot2.y=0,I.bouncePlatform.on(!0),I.swipeText.visible=!0,I.hero.x=I.halfWidth,I.hero.y=I.halfHeight,I.introScreenOnStage=!1,I.loopingQ=Math.max(I.background.lineQ,I.fruit.fruits.length,I.clouds.clouds.length,I.mines.mines.length)},E.prototype.nextLevel=function(){1==I.level.level?(this.startButton.interactive=!1,this.startButton.buttonMode=!1,this.startButton.mousedown=null,this.startButton.mouseup=this.startButton.mouseupoutside=null,I.stage.removeChild(this.startButton)):(this.nextLevelButton.interactive=!1,this.nextLevelButton.buttonMode=!1,this.nextLevelButton.mousedown=null,this.nextLevelButton.mouseup=this.startButton.mouseupoutside=null,I.stage.removeChild(this.nextLevelButton)),I.drums.addToStage(),I.fruit.addToStage(),I.stage.addChild(I.swipeText),I.mines.addToStage(),I.stage.setChildIndex(I.hero,I.stage.children.length-1),I.clouds.addToStage(),I.stage.setChildIndex(I.kingCont,I.stage.children.length-1),I.stage.addChild(I.level),I.stage.addChild(I.score),I.level.x=I.score.x,this.clearNextLevelScreen()},E.prototype.tickIt=function(){this.fruitCont.rotation+=.005;for(var a=0;a<I.fruit.fruitQ;a++){var b=I.fruit.fruits[a];void 0!==b&&(b.rotation-=.005)}},F.prototype.build=function(){for(var a=0;a<this.mineQ;a++){var b=this.mine();this.mines.push(b)}this.redLittles=new f("redLittle.png",200,[10,30],[10,50],[.05,2],!0,!0,I),this.redBigs=new f("redBig.png",100,[3,8],[50,100],[.05,2],!0,!0,I)},F.prototype.addMoreMines=function(){for(var a,b=I.level.mineQ-this.mineQ,c=0;b>c;c++)a=this.mine(),this.mines.push(a);this.mineQ=I.level.mineQ},F.prototype.removeFromStage=function(){this.onStage=!1;for(var a=0;a<this.mineQ;a++){var b=this.mines[a];I.kingCont.removeChild(b)}},F.prototype.addToStage=function(){this.onStage=!0;for(var a=0;a<this.mineQ;a++){var b=this.mines[a];b.alpha=0,b.x=v(0,I.canvasWidth),b.y=v(0,I.canvasHeight),I.kingCont.addChild(b),TweenLite.to(b,.5,{alpha:1})}},F.prototype.explode=function(a){o("explosion"),this.redBigs.startPool(a.x,a.y,I.kingCont),this.redLittles.startPool(a.x,a.y,I.kingCont),a.x=v(0,I.canvasWidth),a.y=v(0,150),TweenLite.killTweensOf(this.redBackground),this.redBackground.alpha=1,this.redBackground.visible=!0,I.stage.setChildIndex(this.redBackground,5),TweenLite.to(this.redBackground,.5,{alpha:0})},F.prototype.mine=function(){var a=new PIXI.Sprite.fromFrame("mine.png");return a.rect=new PIXI.Rectangle(-30,-30,60,60),a.w=a.h=Math.max(a.height,a.width),a.anchor.x=a.anchor.y=.5,a.rot=v(-.005,.01),a},G.prototype.addToStage=function(){this.onStage=!0,this.level.scale.x=this.level.scale.y=this.complete.scale.x=this.complete.scale.y=0,I.stage.addChild(this.level),I.stage.addChild(this.complete),this.tl.to(this.level.scale,.5,{x:1,y:1,ease:Back.easeOut}),this.tl.to(this.complete.scale,.5,{x:1,y:1,ease:Back.easeOut,onComplete:y(this.done,this)}),I.nextLevelScreen.line.alpha=0,I.nextLevelScreen.dot1.alpha=0,I.nextLevelScreen.dot2.alpha=0,I.hero.alpha=0,I.nextLevelScreen.fruitCont.alpha=0,I.nextLevelScreen.nextLevelButton.alpha=0,I.nextLevelScreen.startButton.alpha=0,I.mines.removeFromStage(),I.drums.removeFromStage(),I.clouds.removeFromStage(),I.stage.removeChild(I.level),
I.stage.removeChild(I.score),I.stage.removeChild(I.swipeText)},G.prototype.done=function(){TweenLite.delayedCall(2,y(I.nextLevelScreen.stop,I.nextLevelScreen))},G.prototype.shrink=function(){this.tl.to(this.level.scale,1,{x:0,y:0,ease:Back.easeOut}),this.tl.to(this.complete.scale,1,{x:0,y:0,ease:Back.easeOut,onComplete:y(this.cleanUp,this)})},G.prototype.cleanUp=function(){I.stage.removeChild(this.level),I.stage.removeChild(this.complete),this.onStage=!1},H.prototype.sendScore=function(){if(void 0!==J&&"guest"!==J){this.oneGamePerPageHit===!1&&(this.startTime=(new Date).getTime());var a=(new Date).getTime(),b=a-this.startTime,c=J+this.startTime.toString(),d=new Array(new Array("username",J),new Array("uniqueKey",c),new Array("score",I.score.score),new Array("level",I.level.level),new Array("duration",b),new Array("datestamp",a));$.post("../../../snippets/score.php",{gameName:"bouncePig",username:J,uniqueKey:c,data:d,token:token},function(a){alert(a)})}}}(window);